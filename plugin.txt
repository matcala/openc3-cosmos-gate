VARIABLE _target_name    GATE
VARIABLE cmd_port        6200                                 # Destination port for commands over UDP
VARIABLE tlm_read_port   6201                                 # Listen port for UDP telemetry inbound - allow inbound in docker-compose.yaml!
VARIABLE rest_endpoint   host.docker.internal:8080/authorize  # Listening URI which Aranya exposes to receive packets from dispatcher script

TARGET GATE <%= _target_name %>
INTERFACE <%= _target_name %>_INT openc3/interfaces/udp_interface.py host.docker.internal <%= cmd_port %> <%= tlm_read_port %>
  MAP_TARGET <%= _target_name %>
  # With protocol write we make sure every outgoing packet goes through dispatcher script waiting for approval
  PROTOCOL WRITE <%= _target_name %>/lib/dispatcher.py <%= rest_endpoint %>
